{
	"info": {
		"_postman_id": "d525b3b5-f828-4123-9b49-e27ce2ca0016",
		"name": "Customers & Orders APIs – Local",
		"description": "Colección con endpoints de customers-api y orders-api para entorno local.\nUsa variables: {{base_url_customers}}, {{base_url_orders}}, {{jwt_token}}, {{service_token}}, {{idempotency_key}}.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "16328611"
	},
	"item": [
		{
			"name": "Customers API",
			"item": [
				{
					"name": "Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_customers}}/health",
							"host": [
								"{{base_url_customers}}"
							],
							"path": [
								"health"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Customer",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\"name\": \"ABI\", \"email\": \"abi_company@ortega.com\", \"phone\": \"+54 11 1234-5678\"}"
						},
						"url": {
							"raw": "{{base_url_customers}}/customers",
							"host": [
								"{{base_url_customers}}"
							],
							"path": [
								"customers"
							]
						}
					},
					"response": []
				},
				{
					"name": "List Customers (search, cursor, limit)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_customers}}/customers?limit={{limit}}&search={{search}}&cursor={{cursor}}",
							"host": [
								"{{base_url_customers}}"
							],
							"path": [
								"customers"
							],
							"query": [
								{
									"key": null,
									"value": null,
									"disabled": true
								},
								{
									"key": "limit",
									"value": "{{limit}}"
								},
								{
									"key": "search",
									"value": "{{search}}"
								},
								{
									"key": "cursor",
									"value": "{{cursor}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Customer by ID",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_customers}}/customers/{{customer_id}}",
							"host": [
								"{{base_url_customers}}"
							],
							"path": [
								"customers",
								"{{customer_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Customer",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\"email\": \"acme@hotmail.com\"}"
						},
						"url": {
							"raw": "{{base_url_customers}}/customers/{{customer_id}}",
							"host": [
								"{{base_url_customers}}"
							],
							"path": [
								"customers",
								"{{customer_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Customer",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url_customers}}/customers/{{customer_id}}",
							"host": [
								"{{base_url_customers}}"
							],
							"path": [
								"customers",
								"{{customer_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Internal: Get Customer by ID (Service Token)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{service_token}}"
							}
						],
						"url": {
							"raw": "{{base_url_customers}}/internal/customers/{{customer_id}}",
							"host": [
								"{{base_url_customers}}"
							],
							"path": [
								"internal",
								"customers",
								"{{customer_id}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Orders API",
			"item": [
				{
					"name": "Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_orders}}/health",
							"host": [
								"{{base_url_orders}}"
							],
							"path": [
								"health"
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Product",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\"sku\": \"SKU-003\", \"name\": \"Widget C\", \"price_cents\": 1250000, \"stock\": 100}"
						},
						"url": {
							"raw": "{{base_url_orders}}/products",
							"host": [
								"{{base_url_orders}}"
							],
							"path": [
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": "Patch Product",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\"price_cents\": 99900, \"stock\": 15}"
						},
						"url": {
							"raw": "{{base_url_orders}}/products/{{product_id}}",
							"host": [
								"{{base_url_orders}}"
							],
							"path": [
								"products",
								"{{product_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Product by ID",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_orders}}/products/{{product_id}}",
							"host": [
								"{{base_url_orders}}"
							],
							"path": [
								"products",
								"{{product_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "List Products (search, cursor, limit)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_orders}}/products?search={{search}}&cursor={{cursor}}&limit={{limit}}",
							"host": [
								"{{base_url_orders}}"
							],
							"path": [
								"products"
							],
							"query": [
								{
									"key": "search",
									"value": "{{search}}"
								},
								{
									"key": "cursor",
									"value": "{{cursor}}"
								},
								{
									"key": "limit",
									"value": "{{limit}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create Order",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\"customer_id\": 1, \"items\": [{\"product_id\": 3, \"qty\": 9}]}"
						},
						"url": {
							"raw": "{{base_url_orders}}/orders",
							"host": [
								"{{base_url_orders}}"
							],
							"path": [
								"orders"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Order by ID",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_orders}}/orders/{{order_id}}",
							"host": [
								"{{base_url_orders}}"
							],
							"path": [
								"orders",
								"{{order_id}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "List Orders (status, from, to, cursor, limit)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url_orders}}/orders?status={{status}}&from={{from}}&to={{to}}&cursor={{cursor}}&limit={{limit}}",
							"host": [
								"{{base_url_orders}}"
							],
							"path": [
								"orders"
							],
							"query": [
								{
									"key": "status",
									"value": "{{status}}"
								},
								{
									"key": "from",
									"value": "{{from}}"
								},
								{
									"key": "to",
									"value": "{{to}}"
								},
								{
									"key": "cursor",
									"value": "{{cursor}}"
								},
								{
									"key": "limit",
									"value": "{{limit}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Confirm Order (Idempotent)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "X-Idempotency-Key",
								"value": "{{idempotency_key}}"
							}
						],
						"url": {
							"raw": "{{base_url_orders}}/orders/{{order_id}}/confirm",
							"host": [
								"{{base_url_orders}}"
							],
							"path": [
								"orders",
								"{{order_id}}",
								"confirm"
							]
						}
					},
					"response": []
				},
				{
					"name": "Cancel Order",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{jwt_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url_orders}}/orders/{{order_id}}/cancel",
							"host": [
								"{{base_url_orders}}"
							],
							"path": [
								"orders",
								"{{order_id}}",
								"cancel"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url_customers",
			"value": "http://localhost:3001",
			"type": "string"
		},
		{
			"key": "base_url_orders",
			"value": "http://localhost:3002",
			"type": "string"
		},
		{
			"key": "jwt_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "service_token",
			"value": "service-secret-123",
			"type": "string"
		},
		{
			"key": "customer_id",
			"value": "1",
			"type": "string"
		},
		{
			"key": "product_id",
			"value": "1",
			"type": "string"
		},
		{
			"key": "order_id",
			"value": "1",
			"type": "string"
		},
		{
			"key": "search",
			"value": "",
			"type": "string"
		},
		{
			"key": "cursor",
			"value": "",
			"type": "string"
		},
		{
			"key": "limit",
			"value": "10",
			"type": "string"
		},
		{
			"key": "status",
			"value": "",
			"type": "string"
		},
		{
			"key": "from",
			"value": "",
			"type": "string"
		},
		{
			"key": "to",
			"value": "",
			"type": "string"
		},
		{
			"key": "idempotency_key",
			"value": "abc-123",
			"type": "string"
		}
	]
}